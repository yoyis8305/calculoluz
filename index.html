<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Calculadora Luz</title>
    <style>
        /* ESTILOS CSS (DISEÃ‘O) */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 15px;
            display: flex;
            justify-content: center;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 450px;
        }
        h2 {
            text-align: center;
            color: #333;
            margin-top: 0;
        }
        .input-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
            font-size: 14px;
        }
        /* Inputs grandes para dedos */
        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 18px; /* Letra grande para mÃ³vil */
            box-sizing: border-box;
            outline: none;
            -webkit-appearance: none; /* Quita estilos feos de iPhone */
        }
        input:focus {
            border-color: #2196f3;
            box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);
        }
        .highlight-yellow { background-color: #fffde7; border-color: #fbc02d; }
        .highlight-blue { background-color: #e3f2fd; border-color: #2196f3; }

        .people-config {
            background: #fafafa;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #eee;
            margin-bottom: 20px;
        }
        .floor-inputs {
            display: flex;
            gap: 10px;
            justify-content: space-between;
        }
        .floor-input-box { width: 30%; text-align: center; }
        .floor-input-box input { text-align: center; }

        /* BotÃ³n gigante para tocar fÃ¡cil */
        button {
            width: 100%;
            padding: 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        button:active { transform: scale(0.98); background-color: #0056b3; }

        /* Resultados */
        .results {
            margin-top: 25px;
            display: none;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .summary-box {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #c8e6c9;
        }
        .summary-box p { margin: 5px 0; font-size: 15px; display: flex; justify-content: space-between; }
        
        .floor-card {
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }
        .floor-title {
            color: #007bff;
            font-weight: 800;
            font-size: 16px;
            margin-bottom: 5px;
            text-transform: uppercase;
        }
        .result-row {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #555;
            margin-bottom: 3px;
        }
        .total-row {
            font-weight: bold;
            color: #d32f2f;
            font-size: 16px;
            margin-top: 5px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>âš¡ Calculadora Recibo</h2>

    <div class="input-group">
        <label>ðŸ’° Total a Pagar (Recibo):</label>
        <input type="tel" inputmode="numeric" id="totalRecibo" value="306080" class="highlight-blue" onfocus="this.select()">
    </div>

    <div class="input-group">
        <label>ðŸ§¹ Total Aseo:</label>
        <input type="tel" inputmode="numeric" id="totalAseo" value="97970" class="highlight-yellow" onfocus="this.select()">
    </div>

    <div class="people-config">
        <label style="text-align:center; margin-bottom:10px;">ðŸ‘¥ Personas por Piso</label>
        <div class="floor-inputs">
            <div class="floor-input-box">
                <label>Piso 1</label>
                <input type="tel" inputmode="numeric" id="p1_personas" value="0" onfocus="this.select()">
            </div>
            <div class="floor-input-box">
                <label>Piso 2</label>
                <input type="tel" inputmode="numeric" id="p2_personas" value="2" onfocus="this.select()">
            </div>
            <div class="floor-input-box">
                <label>Piso 3</label>
                <input type="tel" inputmode="numeric" id="p3_personas" value="3" onfocus="this.select()">
            </div>
        </div>
    </div>

    <button onclick="calcular()">CALCULAR</button>

    <div class="results" id="resultados">
        <div class="summary-box">
            <p><span>Luz Total:</span> <strong id="resLuzTotal">$0</strong></p>
            <p><span>Por Persona:</span> <strong id="resLuzPersona">$0</strong></p>
            <p><span>Aseo x Piso:</span> <strong id="resAseoPiso">$0</strong></p>
        </div>

        <div class="floor-card">
            <div class="floor-title">PISO 1</div>
            <div class="result-row"><span>Aseo:</span> <span id="p1_aseo">$0</span></div>
            <div class="result-row"><span>Luz:</span> <span id="p1_luz">$0</span></div>
            <div class="result-row total-row"><span>TOTAL:</span> <span id="p1_total">$0</span></div>
        </div>

        <div class="floor-card">
            <div class="floor-title">PISO 2</div>
            <div class="result-row"><span>Aseo:</span> <span id="p2_aseo">$0</span></div>
            <div class="result-row"><span>Luz:</span> <span id="p2_luz">$0</span></div>
            <div class="result-row total-row"><span>TOTAL:</span> <span id="p2_total">$0</span></div>
        </div>

        <div class="floor-card" style="border:none;">
            <div class="floor-title">PISO 3</div>
            <div class="result-row"><span>Aseo:</span> <span id="p3_aseo">$0</span></div>
            <div class="result-row"><span>Luz:</span> <span id="p3_luz">$0</span></div>
            <div class="result-row total-row"><span>TOTAL:</span> <span id="p3_total">$0</span></div>
        </div>
    </div>
</div>

<script>
    // LÃ“GICA JAVASCRIPT INTEGRADA
    const formatter = new Intl.NumberFormat('es-CO', {
        style: 'currency',
        currency: 'COP',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
    });

    function limpiarValor(id) {
        let input = document.getElementById(id).value;
        if (!input) return 0;
        // Limpia puntos, comas y espacios, dejando solo nÃºmeros
        let limpio = input.toString().replace(/[^0-9]/g, ''); 
        return parseFloat(limpio) || 0;
    }

    function calcular() {
        // Scroll suave hacia los resultados
        document.getElementById('resultados').style.display = 'block';
        
        const totalRecibo = limpiarValor('totalRecibo');
        const totalAseo = limpiarValor('totalAseo');
        const persP1 = limpiarValor('p1_personas');
        const persP2 = limpiarValor('p2_personas');
        const persP3 = limpiarValor('p3_personas');

        const totalLuz = Math.max(0, totalRecibo - totalAseo);
        const aseoPorPiso = totalAseo / 3;
        const totalPersonas = persP1 + persP2 + persP3;

        let luzPorPersona = 0;
        if (totalPersonas > 0) {
            luzPorPersona = totalLuz / totalPersonas;
        }

        const p1_costoLuz = luzPorPersona * persP1;
        const p1_total = aseoPorPiso + p1_costoLuz;

        const p2_costoLuz = luzPorPersona * persP2;
        const p2_total = aseoPorPiso + p2_costoLuz;

        const p3_costoLuz = luzPorPersona * persP3;
        const p3_total = aseoPorPiso + p3_costoLuz;

        document.getElementById('resLuzTotal').innerText = formatter.format(totalLuz);
        document.getElementById('resLuzPersona').innerText = formatter.format(luzPorPersona);
        document.getElementById('resAseoPiso').innerText = formatter.format(aseoPorPiso);

        document.getElementById('p1_aseo').innerText = formatter.format(aseoPorPiso);
        document.getElementById('p1_luz').innerText = formatter.format(p1_costoLuz);
        document.getElementById('p1_total').innerText = formatter.format(p1_total);

        document.getElementById('p2_aseo').innerText = formatter.format(aseoPorPiso);
        document.getElementById('p2_luz').innerText = formatter.format(p2_costoLuz);
        document.getElementById('p2_total').innerText = formatter.format(p2_total);

        document.getElementById('p3_aseo').innerText = formatter.format(aseoPorPiso);
        document.getElementById('p3_luz').innerText = formatter.format(p3_costoLuz);
        document.getElementById('p3_total').innerText = formatter.format(p3_total);

        // Desplaza la pantalla hacia abajo para ver el resultado en mÃ³vil
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
</script>

</body>
</html>
